(function(_ds){var window=this;'use strict';var gP=function(){_ds.wr.apply(this,arguments);this.o=null},hP=function(a){return _ds.O(a,function c(){var d=this,e;return _ds.F(c,function(g){if(1==g.h)return _ds.x(g,_ds.zr(d),2);if(3!=g.h)return d.o?g.return(d.o):_ds.x(g,_ds.xr(d),3);e=g.j;d.o=new _ds.gp(e);return g.return(d.o)})})},iP=function(a){var b=a.ub;a=_ds.T;var c=b[0].imageUrl,d=b[0].url,e=b[0].servePath,g=b[0].nextPlaylistUrl,k=b[0].redeemAnotherBtn,l=b[0].hideButtons,m=b[0].shareTitle,n=b[0].shareDescription;b=(0,_ds.T)('<div class="devsite-badger-award"><div class="devsite-badger-award-inner"><devsite-badge-awarded badge-name="'+
_ds.Z(b[0].title)+'" badge-icon-url="'+_ds.Z(_ds.lu(c))+'" badge-url="'+_ds.Z(_ds.lu(d))+'"'+(e?' badge-path="'+_ds.Z(e)+'"':"")+(m?' badge-share-title="'+_ds.Z(m)+'"':"")+(n?' badge-share-description="'+_ds.Z(n)+'"':"")+(g?' next-playlist-url="'+_ds.Z(_ds.lu(g))+'"':"")+(k?" redeem-another":"")+(l?" hide-buttons":"")+" dismiss></devsite-badge-awarded></div></div>");return a(b)},kP=function(){var a=_ds.Iw.call(this,["devsite-badge-awarded"])||this;a.eventHandler=new _ds.mk(a);a.h=new _ds.hv;a.Ea=
null;a.ub=[];a.j=new _ds.jk(function(){return void jP(a)},250);return a},lP=function(a){null===a||void 0===a?void 0:a.setAttribute("show","")},mP=function(a){return _ds.O(a,function c(){var d=this;return _ds.F(c,function(e){if(1==e.h){if(!d.Ea)return e.return();d.h.remove("temp_badge");d.Ea.removeAttribute("show");return _ds.x(e,_ds.nj(200),2)}if(3!=e.h)return _ds.yh(d.Ea),d.Ea=null,_ds.x(e,_ds.nj(250),3);d.j.xa();_ds.z(e)})})},jP=function(a){return _ds.O(a,function c(){var d=this,e,g,k,l;return _ds.F(c,
function(m){switch(m.h){case 1:e=d;if(d.Ea||0===d.ub.length||"error"===document.body.getAttribute("type")||nP.exec(document.location.pathname))return m.return();_ds.A(m,2);return _ds.x(m,window.customElements.whenDefined("devsite-badge-awarded"),4);case 4:_ds.B(m,3);break;case 2:_ds.C(m);case 3:g=d.ub.splice(0,1);k=_ds.Cu(iP,{ub:g});if(!k)return m.return();d.eventHandler.listen(k,"click",function(n){(n=n.target)&&n.matches("button.dismiss")&&mP(e)});d.Ea=k;(l=k.querySelector("devsite-badge-awarded"))?
(_ds.sk(d.eventHandler,l,"running",function(){lP(e.Ea)}),document.body.appendChild(d.Ea)):(document.body.appendChild(d.Ea),lP(d.Ea));_ds.z(m)}})})},oP=function(a){a.eventHandler.listen(document.body,"devsite-before-page-change",function(){return void mP(a)});a.eventHandler.listen(document.body,"devsite-award-granted",function(b){(b=b.qa)&&b.detail&&(a.ub.push(b.detail.award),a.j.xa())});a.eventHandler.listen(document.body,["devsite-page-loaded","devsite-page-changed"],function(){a.fd();a:if(_ds.Os(a.h)){var b=
a.h.get("temp_badge");if(b){var c=null;try{c=JSON.parse(b)}catch(e){a.h.remove("temp_badge");break a}if(c)if(3>c.displayCount){a.h.set("temp_badge",JSON.stringify(c));b=new URL(c.awardedBy,document.location.origin);var d=_ds.Vi();if(!c.awardedBy||b.origin===d.origin&&b.pathname===d.pathname)a.ub.push(c),a.j.xa()}else a.h.remove("temp_badge")}}})};_ds.r(gP,_ds.wr);_ds.f=gP.prototype;
_ds.f.jc=function(){return _ds.O(this,function b(){var c=this,d;return _ds.F(b,function(e){if(1==e.h)return _ds.x(e,hP(c),2);d=e.j;return e.return(d.jc())})})};
_ds.f.ad=function(a){a=void 0===a?!1:a;return _ds.O(this,function c(){var d=this,e,g,k,l,m;return _ds.F(c,function(n){switch(n.h){case 1:return _ds.x(n,hP(d),2);case 2:return e=n.j,g=_ds.Gr(d,"getWalletId",a),k=_ds.Hr(d,g),k||(k=e.ad(a),_ds.Jr(d,g,k)),l=null,_ds.A(n,3,4),_ds.x(n,k,6);case 6:l=n.j;case 4:_ds.Fa(n);_ds.Ir(d,g);_ds.Ga(n,5);break;case 3:throw m=_ds.C(n),m;case 5:return n.return(l)}})})};
_ds.f.Rd=function(){return _ds.O(this,function b(){var c=this,d;return _ds.F(b,function(e){if(1==e.h)return _ds.x(e,hP(c),2);d=e.j;return e.return(d.Rd())})})};_ds.f.fd=function(){return _ds.O(this,function b(){var c=this,d,e,g,k;return _ds.F(b,function(l){switch(l.h){case 1:return _ds.x(l,hP(c),2);case 2:return d=l.j,e=_ds.Gr(c,"syncWallet"),g=_ds.Hr(c,e),g||(g=d.fd(),_ds.Jr(c,e,g)),_ds.A(l,3,4),_ds.x(l,g,4);case 4:_ds.Fa(l);_ds.Ir(c,e);_ds.Ga(l,0);break;case 3:throw k=_ds.C(l),k;}})})};
_ds.f.Jd=function(){return _ds.O(this,function b(){var c=this,d;return _ds.F(b,function(e){if(1==e.h)return _ds.x(e,hP(c),2);d=e.j;d.Jd();_ds.z(e)})})};var nP=/\/redeem.*|\/u[\/]?.*|\/settings[\/]?.*?/;_ds.r(kP,_ds.Iw);kP.prototype.connectedCallback=function(){oP(this)};kP.prototype.disconnectedCallback=function(){_ds.uk(this.eventHandler);mP(this)};
kP.prototype.fd=function(){return _ds.O(this,function b(){var c,d,e,g,k;return _ds.F(b,function(l){switch(l.h){case 1:return _ds.x(l,DevsiteApp.whenReady(),2);case 2:return _ds.x(l,window.customElements.whenDefined("devsite-user"),3);case 3:c=document.querySelector("devsite-user#devsite-user");if(!c)return l.return();d=!1;_ds.A(l,4);return _ds.x(l,c.isSignedIn(),6);case 6:d=l.j;_ds.B(l,5);break;case 4:_ds.C(l);case 5:if(!d)return l.return();e=new gP;return _ds.x(l,e.jc(),7);case 7:g=l.j;if(!g)return l.return();
k=new _ds.Qr;_ds.A(l,8);return _ds.x(l,k.ea(),10);case 10:_ds.B(l,0);break;case 8:_ds.C(l),_ds.z(l)}})})};try{window.customElements.define("devsite-badger",kP)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteBadger",a)};})(_ds_www);
